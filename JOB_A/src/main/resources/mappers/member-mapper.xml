<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="memberMapper">
	<!-- 오라클 sql-prperties역할이고, ? 대신 #{} 에 넣는다. ? 는 순서대로 확인해야하지만 순서 상관 없고, 데이터 
		타입을 알아서 변환해줌 -->
		
	<resultMap id="resultMember" type="Member">
		<id property="memNo" column="MEM_NO"/>
		<result property="gradeNo" column="GRADE_NO"/>
		<result property="memId" column="MEM_ID"/>
		<result property="memPw" column="MEM_PW"/>
		<result property="memNick" column="MEM_NICK"/>
		<result property="memEmail" column="MEM_EMAIL"/>
		<result property="memBirth" column="MEM_BIRTH"/>
		<result property="memArea" column="MEM_AREA"/>
		<result property="memState" column="MEM_STATE"/>
	</resultMap>

	<insert id="insertMember" parameterType="Member" >
	 	INSERT INTO MEMBER
	 	(MEM_NO, GRADE_NO, MEM_ID, MEM_PW, MEM_NICK, MEM_EMAIL, MEM_BIRTH, MEM_AREA, MEM_STATE)
		VALUES 
		(MEMBER_SEQ.NEXTVAL, 2, #{memId}, #{memPw}, #{memNick}, #{memEmail}, #{memBirth}, #{memArea}, 0) 
	</insert> 

	<select id="loginMember" parameterType="string" resultMap="resultMember">
		SELECT * FROM MEMBER
		WHERE MEM_ID = #{memId}
		<!-- PASSWORD는 지운다. 비밀번호는 계속 다르게 들어오기 때문에 이유가 없어짐 -->
	</select>
<!--
	<update id="updateMember" parameterType="Member">
	 UPDATE MEMBER SET
		EMAIL = #{ email },
		USERNAME = #{ userName },
		AGE = #{ age },
		PHONE = #{ phone },
		ADDRESS = #{ address },
		HOBBY = #{
		hobby, typeHandler=strArrTypeHandler }
		WHERE USERID = #{ userId } 
	</update>
-->
	<!--
	<delete id="deleteMember" parameterType="string">
 	DELETE FROM MEMBER WHERE
		USERID = #{ userId } 
	</delete>
-->

	<!-- 아이디 중복 검사
	<select id="checkIdDuplicate" statementType="CALLABLE"
		parameterType="hashmap"> -->
		<!-- CallableStatement 는 { } 로 묶여 실행되며 시작괄호 '{' 다음에 tab 기호를 읽지 못한다. -->
	<!-- { CALL ID_DUP_CHK( #{userId, mode=IN, jdbcType=VARCHAR}, #{result, mode=OUT, jdbcType=NUMERIC, javaType=integer} ) }	
	</select> -->
	<!-- jdbcType 참조 : https://mybatis.org/mybatis-3/apidocs/reference/org/apache/ibatis/type/JdbcType.html -->
</mapper> 